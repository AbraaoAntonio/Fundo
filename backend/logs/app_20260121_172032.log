2026-01-21 17:20:32,631 - main - INFO - === Logging system initialized ===
2026-01-21 17:20:32,632 - main - INFO - Log file: logs/app_20260121_172032.log
2026-01-21 17:20:32,632 - main - INFO - Log level: INFO
2026-01-21 17:20:32,632 - main - INFO - Timestamp: 20260121_172032
2026-01-21 17:20:34,065 - main - INFO - Included router: routers.aihub.router
2026-01-21 17:20:34,350 - main - INFO - Included router: routers.auth.router
2026-01-21 17:20:34,381 - main - INFO - Included router: routers.health.router
2026-01-21 17:20:34,469 - main - INFO - Included router: routers.settings.router
2026-01-21 17:20:34,896 - main - INFO - Included router: routers.storage.router
2026-01-21 17:20:35,174 - main - INFO - Included router: routers.user.router
2026-01-21 17:20:35,228 - main - INFO - === Application startup initiated ===
2026-01-21 17:20:35,228 - services.database - DEBUG - [DB_OP] Starting database initialization
2026-01-21 17:20:35,229 - services.database - INFO - ðŸ”§ Starting database initialization...
2026-01-21 17:20:35,229 - core.database - INFO - Starting database initialization...
2026-01-21 17:20:35,230 - core.config - DEBUG - Read dynamic attribute database_url from environment variable DATABASE_URL
2026-01-21 17:20:35,230 - core.database - INFO - Normalizing database URL for async compatibility...
2026-01-21 17:20:35,231 - core.database - INFO - Creating async database engine...
2026-01-21 17:20:35,231 - core.database - INFO - Using QueuePool with connection pooling for non-Lambda environment
2026-01-21 17:20:35,324 - core.database - INFO - Database engine created successfully
2026-01-21 17:20:35,324 - core.database - INFO - Creating async session maker...
2026-01-21 17:20:35,324 - core.database - INFO - Async session maker created successfully
2026-01-21 17:20:35,324 - core.database - INFO - Database connection initialized successfully
2026-01-21 17:20:35,324 - services.database - INFO - ðŸ”§ Database connection initialized, now creating tables if tables not exist...
2026-01-21 17:20:35,325 - core.database - DEBUG - [DB_OP] Starting create_tables
2026-01-21 17:20:35,325 - core.database - INFO - ðŸ”§ Starting table creation...
2026-01-21 17:20:37,191 - core.database - INFO - Tables initialized successfully
2026-01-21 17:20:37,192 - core.database - DEBUG - [DB_OP] Create tables completed in 1.8673s
2026-01-21 17:20:37,253 - services.database - INFO - ðŸ”§ Table creation completed
2026-01-21 17:20:37,253 - services.database - INFO - Database initialized successfully
2026-01-21 17:20:37,253 - services.database - DEBUG - [DB_OP] Database initialization completed in 2.0251s
2026-01-21 17:20:37,258 - services.mock_data - INFO - mock_data directory not found, skipping mock initialization
2026-01-21 17:20:37,258 - services.database - DEBUG - [DB_OP] Starting database initialization
2026-01-21 17:20:37,258 - services.database - INFO - ðŸ”§ Starting database initialization...
2026-01-21 17:20:37,259 - core.database - INFO - Starting database initialization...
2026-01-21 17:20:37,259 - core.database - INFO - Database already initialized
2026-01-21 17:20:37,259 - services.database - INFO - ðŸ”§ Database connection initialized, now creating tables if tables not exist...
2026-01-21 17:20:37,259 - core.database - DEBUG - [DB_OP] Starting create_tables
2026-01-21 17:20:37,259 - core.database - INFO - Tables already initialized
2026-01-21 17:20:37,259 - services.database - INFO - ðŸ”§ Table creation completed
2026-01-21 17:20:37,260 - services.database - INFO - Database initialized successfully
2026-01-21 17:20:37,260 - services.database - DEBUG - [DB_OP] Database initialization completed in 0.0015s
2026-01-21 17:20:37,260 - core.config - DEBUG - Read dynamic attribute admin_user_id from environment variable ADMIN_USER_ID
2026-01-21 17:20:37,260 - core.config - DEBUG - Read dynamic attribute admin_user_email from environment variable ADMIN_USER_EMAIL
2026-01-21 17:20:37,854 - services.auth - DEBUG - Created admin user: 715788 with email: abraaojdantonio@gmail.com
2026-01-21 17:20:37,854 - main - INFO - === Application startup completed successfully ===
2026-01-21 17:20:46,174 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-01-21 17:20:46,175 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0006s
2026-01-21 17:20:46,175 - routers.auth - INFO - [token/exchange] Received platform token exchange request
2026-01-21 17:20:46,176 - core.config - DEBUG - Read dynamic attribute oidc_issuer_url from environment variable OIDC_ISSUER_URL
2026-01-21 17:20:46,176 - routers.auth - DEBUG - [token/exchange] Verifying token with issuer: https://auth.atoms.dev/api/v1/oidc/platform/tokens/verify
2026-01-21 17:20:48,165 - httpcore.connection - DEBUG - connect_tcp.started host='auth.atoms.dev' port=443 local_address=None timeout=5.0 socket_options=None
2026-01-21 17:20:48,166 - core.database - DEBUG - [DB_OP] Starting get_db session creation
2026-01-21 17:20:48,166 - core.database - DEBUG - [DB_OP] Database session created successfully in 0.0002s
2026-01-21 17:20:48,167 - routers.auth - INFO - [token/exchange] Received platform token exchange request
2026-01-21 17:20:48,167 - routers.auth - DEBUG - [token/exchange] Verifying token with issuer: https://auth.atoms.dev/api/v1/oidc/platform/tokens/verify
2026-01-21 17:20:48,201 - httpcore.connection - DEBUG - connect_tcp.started host='auth.atoms.dev' port=443 local_address=None timeout=5.0 socket_options=None
2026-01-21 17:20:48,204 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f74b6045f90>
2026-01-21 17:20:48,205 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f74b5e688c0> server_hostname='auth.atoms.dev' timeout=5.0
2026-01-21 17:20:48,215 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f74b5db5db0>
2026-01-21 17:20:48,216 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-21 17:20:48,216 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-21 17:20:48,216 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-21 17:20:48,217 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-21 17:20:48,217 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-21 17:20:48,217 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f74b5ef60e0>
2026-01-21 17:20:48,218 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f74b5ef3040> server_hostname='auth.atoms.dev' timeout=5.0
2026-01-21 17:20:48,226 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f74b6046e60>
2026-01-21 17:20:48,226 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2026-01-21 17:20:48,227 - httpcore.http11 - DEBUG - send_request_headers.complete
2026-01-21 17:20:48,227 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2026-01-21 17:20:48,227 - httpcore.http11 - DEBUG - send_request_body.complete
2026-01-21 17:20:48,227 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2026-01-21 17:20:48,244 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 22 Jan 2026 01:20:48 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-response-time', b'0.001s'), (b'x-request-id', b'd123000ffbd2d81caab9edc3cd36ca80'), (b'cf-cache-status', b'DYNAMIC'), (b'Content-Encoding', b'gzip'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9c1b3b1d5c02565f-LAX')])
2026-01-21 17:20:48,245 - httpx - INFO - HTTP Request: POST https://auth.atoms.dev/api/v1/oidc/platform/tokens/verify "HTTP/1.1 200 OK"
2026-01-21 17:20:48,245 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-21 17:20:48,246 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-21 17:20:48,246 - httpcore.http11 - DEBUG - response_closed.started
2026-01-21 17:20:48,246 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-21 17:20:48,246 - httpcore.connection - DEBUG - close.started
2026-01-21 17:20:48,246 - httpcore.connection - DEBUG - close.complete
2026-01-21 17:20:48,246 - routers.auth - DEBUG - [token/exchange] Issuer response status: 200
2026-01-21 17:20:48,247 - routers.auth - DEBUG - [token/exchange] Issuer response body: {'success': True, 'data': {'exp': 1770425580, 'user_id': 715788, 'email': 'abraaojdantonio@gmail.com', 'pv': 0}, 'message': 'Platform token verified', 'code': 0, 'timestamp': '2026-01-22T01:20:48.240968'}
2026-01-21 17:20:48,247 - routers.auth - INFO - [token/exchange] Token verified, platform_user_id=715788, email=abraaojdantonio@gmail.com
2026-01-21 17:20:48,247 - routers.auth - INFO - [token/exchange] Admin user verified, issuing admin token without DB persistence
2026-01-21 17:20:48,247 - routers.auth - DEBUG - [token/exchange] Admin user object for token issuance: id=715788, email=abraaojdantonio@gmail.com, role=admin
2026-01-21 17:20:48,247 - core.config - DEBUG - Read dynamic attribute jwt_expire_minutes from environment variable JWT_EXPIRE_MINUTES
2026-01-21 17:20:48,247 - core.config - DEBUG - Read dynamic attribute jwt_secret_key from environment variable JWT_SECRET_KEY
2026-01-21 17:20:48,247 - core.config - DEBUG - Read dynamic attribute jwt_algorithm from environment variable JWT_ALGORITHM
2026-01-21 17:20:48,412 - core.auth - DEBUG - Authentication token created for user hash: 7001fcbb
2026-01-21 17:20:48,412 - routers.auth - INFO - [token/exchange] Token issued successfully for user_id=715788, expires_at=2026-02-21 01:20:48.247631+00:00
2026-01-21 17:20:48,412 - core.database - DEBUG - [DB_OP] Database session cleanup after 2.2380s
2026-01-21 17:20:48,413 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Date', b'Thu, 22 Jan 2026 01:20:48 GMT'), (b'Content-Type', b'application/json'), (b'Transfer-Encoding', b'chunked'), (b'Connection', b'keep-alive'), (b'x-response-time', b'0.001s'), (b'x-request-id', b'b5793efa31bdc6565f2b7581aab754ec'), (b'cf-cache-status', b'DYNAMIC'), (b'Content-Encoding', b'gzip'), (b'Server', b'cloudflare'), (b'CF-RAY', b'9c1b3b1d69c4cb7a-LAX')])
2026-01-21 17:20:48,413 - httpx - INFO - HTTP Request: POST https://auth.atoms.dev/api/v1/oidc/platform/tokens/verify "HTTP/1.1 200 OK"
2026-01-21 17:20:48,413 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2026-01-21 17:20:48,414 - httpcore.http11 - DEBUG - receive_response_body.complete
2026-01-21 17:20:48,414 - httpcore.http11 - DEBUG - response_closed.started
2026-01-21 17:20:48,414 - httpcore.http11 - DEBUG - response_closed.complete
2026-01-21 17:20:48,414 - httpcore.connection - DEBUG - close.started
2026-01-21 17:20:48,415 - httpcore.connection - DEBUG - close.complete
2026-01-21 17:20:48,415 - routers.auth - DEBUG - [token/exchange] Issuer response status: 200
2026-01-21 17:20:48,415 - routers.auth - DEBUG - [token/exchange] Issuer response body: {'success': True, 'data': {'exp': 1770425580, 'user_id': 715788, 'email': 'abraaojdantonio@gmail.com', 'pv': 0}, 'message': 'Platform token verified', 'code': 0, 'timestamp': '2026-01-22T01:20:48.264538'}
2026-01-21 17:20:48,415 - routers.auth - INFO - [token/exchange] Token verified, platform_user_id=715788, email=abraaojdantonio@gmail.com
2026-01-21 17:20:48,415 - routers.auth - INFO - [token/exchange] Admin user verified, issuing admin token without DB persistence
2026-01-21 17:20:48,415 - routers.auth - DEBUG - [token/exchange] Admin user object for token issuance: id=715788, email=abraaojdantonio@gmail.com, role=admin
2026-01-21 17:20:48,416 - core.auth - DEBUG - Authentication token created for user hash: 7001fcbb
2026-01-21 17:20:48,416 - routers.auth - INFO - [token/exchange] Token issued successfully for user_id=715788, expires_at=2026-02-21 01:20:48.415842+00:00
2026-01-21 17:20:48,416 - core.database - DEBUG - [DB_OP] Database session cleanup after 0.2500s
2026-01-21 17:24:53,884 - services.database - DEBUG - [DB_OP] Starting database close
2026-01-21 17:24:53,948 - core.database - INFO - Database connection closed and engine disposed
2026-01-21 17:24:53,948 - services.database - INFO - Database connections closed
2026-01-21 17:24:53,948 - services.database - DEBUG - [DB_OP] Database close completed in 0.0639s
